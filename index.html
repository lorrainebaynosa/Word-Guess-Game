<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  
  <title>Hangman</title>
</head>

<body>
  <div id="container"></div>
  <div id="header"></div>
      <h1>Hangman Game - Game of Thrones!</h1>  
    <p> Guess words associated with the G. Press any key to get started!</p>
    <p id="wins"></p>
    <p id="word"></p>
    <script>

      var words = ["targaryen", "lannister", "stark", "bolton", "baratheon"];
      var currentWord = ""
      var guessesTaken = 0; //value of property "guessesTaken" is 0  
      var wins = 0; //value of property "wins" is 0, or number of times user guessed word correctly.
      var userInput  = [];
      var totalGuesses = 0;
      var gameInProgress = false;
      var maxGuesses = 12;
      var guessedCorrectly = false;
      
      function selectRandomWord(words) {
        var numberOfChoices = words.length;
        var randomIndex = Math.floor(Math.random() * numberOfChoices);
        return words[randomIndex];  
      }

      function startNewGame() {
        currentWord = selectRandomWord(words);
        guessesTaken = 0;
        userInput = [];
        totalGuesses = 0;
        gameInProgress = true;
        guessedCorrectly = false;
        console.log('New game started');
      }

      function playGame() {
        if (userInput.includes(event.key)) {
          console.log("event key already in guesses.")
        } else {

          userInput.push(event.key)
          totalGuesses++
          console.log("userInput ", userInput)
          console.log("totalGuesses ", totalGuesses)
        renderWord()
        }
      }

      function renderWord(){
        var result = "";
        var incorrectGuesses = 0;
        for (var i=0; i<currentWord.length; i++){
          var currentLetter = currentWord.charAt(i);
          if (userInput.includes(currentLetter)) {
            result += currentLetter;
          } else {
            result += "?";
            incorrectGuesses++;
          }
        }
        console.log(result);
        if (incorrectGuesses === 0){
          winner()
        }
      }

      function endGame() {
        gameInProgress = false;
        console.log('you lose');
      }
      
      function winner(){
        gameInProgress = false;
        console.log("you win")
      }
        
      document.addEventListener('keyup', function(event){
        if (gameInProgress === false) {
          startNewGame();
        }
        else {
          if (totalGuesses >= maxGuesses) {
            endGame()
          } 
          else {
            playGame();
          }
        }
      });

    </script>

</body>

</html>